<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Game Th·∫ª Nhi·ªát ƒê·ªông H·ªçc</title>
<style>
body{font-family:Arial;background:#f2f2f2;padding:20px}
.container{max-width:900px;margin:auto;background:#fff;padding:20px;border-radius:10px}
button{padding:10px 15px;font-size:16px;border:none;border-radius:6px;background:#007bff;color:#fff;cursor:pointer;margin:5px}
button:hover{background:#0056b3}
canvas{border:1px solid #ccc;margin-top:15px}
.quiz{margin-top:15px;padding:10px;background:#eef;border-radius:8px}
</style>
</head>
<body>
<div class="container">
<h1>üé¥ Game Th·∫ª Nhi·ªát ƒê·ªông H·ªçc</h1>
<div id="state"></div>
<button onclick="drawCard()">R√∫t th·∫ª</button>
<canvas id="pv" width="600" height="400"></canvas>
<p><b>ƒê·ªì th·ªã:</b> <span id="graphType">P ‚Äì V</span></p>
<div class="quiz" id="quiz"></div>
<div class="quiz" id="score"></div>
</div>

<script>
// ===== TR·∫†NG TH√ÅI KH√ç =====
let state={P:1,V:1,T:300};
let oldState=null;
let score=0;
let timer=null;

const cards=[
{name:"ƒê·∫≥ng t√≠ch",type:"V"},
{name:"ƒê·∫≥ng √°p",type:"P"},
{name:"ƒê·∫≥ng nhi·ªát",type:"T"}
];

const stateDiv=document.getElementById("state");
const quizDiv=document.getElementById("quiz");
const scoreDiv=document.getElementById("score");
const ctx=document.getElementById("pv").getContext("2d");
const graphTypeSpan=document.getElementById("graphType");("2d");

function updateState(){
stateDiv.innerHTML=`P=${state.P.toFixed(2)}, V=${state.V.toFixed(2)}, T=${state.T.toFixed(0)}K`;
}
updateState();

// ===== √ÅP D·ª§NG TH·∫∫ =====
function apply(card){
if(card.type==="V"){state.T+=30;state.P=state.T/300;}
if(card.type==="P"){state.T+=30;state.V=state.T/300;}
if(card.type==="T"){state.V+=0.3;state.P=1/state.V;}
}

// ===== V·∫º ƒê·ªí TH·ªä =====
function draw(type){
ctx.clearRect(0,0,600,400);

// Tr·ª•c t·ªça ƒë·ªô
ctx.beginPath();
ctx.moveTo(50,350);ctx.lineTo(550,350); // tr·ª•c ho√†nh
ctx.moveTo(50,350);ctx.lineTo(50,50);   // tr·ª•c tung
ctx.stroke();

ctx.fillText("V",560,360);
ctx.fillText("P",40,40);

// ƒê·ªì th·ªã
ctx.beginPath();
if(type==="V"){
 graphTypeSpan.innerText="P ‚Äì V (ƒê·∫≥ng t√≠ch)";
 let x=50+oldState.V*200;
 ctx.moveTo(x,350-oldState.P*200);
 ctx.lineTo(x,350-state.P*200);
}
if(type==="P"){
 graphTypeSpan.innerText="P ‚Äì V (ƒê·∫≥ng √°p)";
 let y=350-oldState.P*200;
 ctx.moveTo(50+oldState.V*200,y);
 ctx.lineTo(50+state.V*200,y);
}
if(type==="T"){
 graphTypeSpan.innerText="P ‚Äì V (ƒê·∫≥ng nhi·ªát)";
 for(let v=oldState.V;v<=state.V;v+=0.01){
  let p=1/v;
  let x=50+v*200;
  let y=350-p*200;
  if(v===oldState.V)ctx.moveTo(x,y);
  else ctx.lineTo(x,y);
 }
}
ctx.stroke();
ctx.beginPath();
if(type==="V"){let x=50+oldState.V*200;ctx.moveTo(x,350-oldState.P*200);ctx.lineTo(x,350-state.P*200);}
if(type==="P"){let y=350-oldState.P*200;ctx.moveTo(50+oldState.V*200,y);ctx.lineTo(50+state.V*200,y);}
if(type==="T"){for(let v=oldState.V;v<=state.V;v+=0.01){let p=1/v;let x=50+v*200;let y=350-p*200;if(v===oldState.V)ctx.moveTo(x,y);else ctx.lineTo(x,y);}}
ctx.stroke();
}

// ===== C√ÇU H·ªéI =====
function quiz(card){
clearInterval(timer);
let q="",opts=[],ans="";
if(card.type==="V"){q="Qu√° tr√¨nh n√†o gi·ªØ V kh√¥ng ƒë·ªïi?";opts=["ƒê·∫≥ng t√≠ch","ƒê·∫≥ng √°p","ƒê·∫≥ng nhi·ªát"];ans="ƒê·∫≥ng t√≠ch";}
if(card.type==="P"){q="Qu√° tr√¨nh n√†o gi·ªØ P kh√¥ng ƒë·ªïi?";opts=["ƒê·∫≥ng t√≠ch","ƒê·∫≥ng √°p","ƒê·∫≥ng nhi·ªát"];ans="ƒê·∫≥ng √°p";}
if(card.type==="T"){q="Qu√° tr√¨nh n√†o gi·ªØ T kh√¥ng ƒë·ªïi?";opts=["ƒê·∫≥ng t√≠ch","ƒê·∫≥ng √°p","ƒê·∫≥ng nhi·ªát"];ans="ƒê·∫≥ng nhi·ªát";}
quizDiv.innerHTML=`<b>${q}</b><br>`;
opts.forEach(o=>quizDiv.innerHTML+=`<button onclick="check('${o}','${ans}')">${o}</button><br>`);
let t=10;quizDiv.innerHTML+=`<p id='time'>‚è±Ô∏è ${t}s</p>`;
timer=setInterval(()=>{t--;document.getElementById('time').innerText=`‚è±Ô∏è ${t}s`;if(t<=0){clearInterval(timer);quizDiv.innerHTML+=`<br>H·∫øt gi·ªù! ƒê√°p √°n: ${ans}`;}},1000);
}

function check(c,a){
clearInterval(timer);
if(c===a){score++;quizDiv.innerHTML+=`<br>‚úÖ ƒê√∫ng`;}
else quizDiv.innerHTML+=`<br>‚ùå Sai ‚Äì ${a}`;
scoreDiv.innerHTML=`‚≠ê ƒêi·ªÉm: ${score}`;
}

// ===== R√öT TH·∫∫ =====
function drawCard(){
const card=cards[Math.floor(Math.random()*cards.length)];
alert("B·∫°n r√∫t th·∫ª: "+card.name);
oldState={...state};
apply(card);
updateState();
draw(card.type);
quiz(card);
}
</script>
</body>
</html>
